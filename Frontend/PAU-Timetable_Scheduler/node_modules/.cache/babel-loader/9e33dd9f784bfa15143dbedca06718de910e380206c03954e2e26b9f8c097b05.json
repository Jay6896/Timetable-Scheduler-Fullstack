{"ast":null,"code":"import React,{useState}from'react';import Header from'./Header';import FileUpload from'./FileUpload';import TimetableResults from'./TimetableResults';import InstructionsModal from'./InstructionsModal';import{uploadFile,generateTimetable,downloadTimetable}from'../services/api.js';import'./TimetableGenerator.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TimetableGenerator=()=>{const[selectedFile,setSelectedFile]=useState(null);const[uploadId,setUploadId]=useState(null);// Track upload ID for downloads\nconst[isProcessing,setIsProcessing]=useState(false);const[progress,setProgress]=useState(0);const[progressText,setProgressText]=useState('');const[generatedData,setGeneratedData]=useState([]);const[showInstructions,setShowInstructions]=useState(false);const[error,setError]=useState('');// New state: ask user for number of generations\nconst[generations,setGenerations]=useState('');const[awaitingGenerations,setAwaitingGenerations]=useState(false);const handleFileSelect=file=>{console.log('File selected:',file);setSelectedFile(file);setError('');setGeneratedData([]);setUploadId(null);// Reset upload ID\nsetGenerations('');// Immediately show generations selector with the first appearance of Generate button\nsetAwaitingGenerations(true);};const handleFileReset=()=>{console.log('Resetting file selection');setSelectedFile(null);setUploadId(null);setIsProcessing(false);setProgress(0);setProgressText('');setGeneratedData([]);setError('');setGenerations('');setAwaitingGenerations(false);};const startGeneration=async currentUploadId=>{// Start generation with progress updates and user-provided generations\nsetProgress(30);setProgressText('Starting timetable generation...');const progressCallback=progressData=>{console.log('Progress update:',progressData);if(!progressData)return;const pct=typeof progressData.percentage==='number'?progressData.percentage:null;if(pct!==null){// Allow progress to reach 100 when backend reports completion\nconst clampedProgress=Math.min(Math.max(pct,30),100);setProgress(clampedProgress);}if(progressData.message){setProgressText(progressData.message);}};// Build options: require generations\nconst gens=parseInt(generations,10);const options=Number.isFinite(gens)&&gens>0?{max_generations:gens}:{};// Generate timetable using the upload ID with options\nconsole.log('Generating timetable with ID:',currentUploadId,'options:',options);const timetableData=await generateTimetable(currentUploadId,progressCallback,options);console.log('Timetable generation completed:',timetableData);// Extract timetables from response - handle different response formats\nlet timetables=[];if(timetableData){var _timetableData$data;timetables=timetableData.timetables||((_timetableData$data=timetableData.data)===null||_timetableData$data===void 0?void 0:_timetableData$data.timetables)||timetableData.results||(Array.isArray(timetableData)?timetableData:[]);}console.log('Extracted timetables:',timetables);if(!Array.isArray(timetables)){console.warn('Timetables is not an array, converting:',timetables);timetables=timetables?[timetables]:[];}setProgress(100);setProgressText('Complete!');setGeneratedData(timetables);setTimeout(()=>{setIsProcessing(false);setProgress(0);setProgressText('');},1500);};const handleGenerate=async()=>{if(!selectedFile||isProcessing){console.log('Cannot generate: no file selected or already processing');return;}// Ensure valid generations before proceeding\nconst gens=parseInt(generations,10);if(!Number.isFinite(gens)||gens<=0){setError('Please select the number of generations.');return;}if(!uploadId){// Perform upload first, then immediately start generation\nconsole.log('Starting upload then generation...');setIsProcessing(true);setError('');setGeneratedData([]);setProgress(5);setProgressText('Preparing upload...');try{setProgress(10);setProgressText('Uploading file...');console.log('Uploading file:',selectedFile.name);const uploadResponse=await uploadFile(selectedFile);console.log('Upload response:',uploadResponse);const currentUploadId=(uploadResponse===null||uploadResponse===void 0?void 0:uploadResponse.uploadId)||(uploadResponse===null||uploadResponse===void 0?void 0:uploadResponse.upload_id)||(uploadResponse===null||uploadResponse===void 0?void 0:uploadResponse.fileId)||(uploadResponse===null||uploadResponse===void 0?void 0:uploadResponse.id)||(uploadResponse===null||uploadResponse===void 0?void 0:uploadResponse.meta)&&(uploadResponse.meta.upload_id||uploadResponse.meta.uploadId||uploadResponse.meta.id);console.log('Extracted upload ID:',currentUploadId);if(!currentUploadId){throw new Error('Upload ID not returned by server. Response: '+JSON.stringify(uploadResponse));}setUploadId(currentUploadId);// Hide the selector while processing\nsetAwaitingGenerations(false);await startGeneration(currentUploadId);return;}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;console.error('Timetable generation error:',err);let errorMessage='An error occurred while generating the timetable';if(err!==null&&err!==void 0&&(_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.error){errorMessage=err.response.data.error;}else if(err!==null&&err!==void 0&&(_err$response2=err.response)!==null&&_err$response2!==void 0&&(_err$response2$data=_err$response2.data)!==null&&_err$response2$data!==void 0&&_err$response2$data.message){errorMessage=err.response.data.message;}else if(err!==null&&err!==void 0&&err.message){errorMessage=err.message;}setError(errorMessage);setIsProcessing(false);setProgress(0);setProgressText('');return;}}try{setIsProcessing(true);setAwaitingGenerations(false);await startGeneration(uploadId);}catch(err){var _err$response3,_err$response3$data,_err$response4,_err$response4$data;console.error('Timetable generation error:',err);let errorMessage='An error occurred while generating the timetable';if(err!==null&&err!==void 0&&(_err$response3=err.response)!==null&&_err$response3!==void 0&&(_err$response3$data=_err$response3.data)!==null&&_err$response3$data!==void 0&&_err$response3$data.error){errorMessage=err.response.data.error;}else if(err!==null&&err!==void 0&&(_err$response4=err.response)!==null&&_err$response4!==void 0&&(_err$response4$data=_err$response4.data)!==null&&_err$response4$data!==void 0&&_err$response4$data.message){errorMessage=err.response.data.message;}else if(err!==null&&err!==void 0&&err.message){errorMessage=err.message;}setError(errorMessage);setIsProcessing(false);setProgress(0);setProgressText('');}};const handleDownload=async format=>{if(!uploadId){setError('No timetable data available for download - missing upload ID');return;}if(generatedData.length===0){setError('No timetable data available for download - no generated data');return;}console.log(\"Starting download: \".concat(format,\" format for upload ID: \").concat(uploadId));try{await downloadTimetable(uploadId,format);console.log('Download completed successfully');}catch(err){var _err$response5,_err$response5$data,_err$response6,_err$response6$data;console.error('Download error:',err);let errorMessage='An error occurred while downloading';if(err!==null&&err!==void 0&&(_err$response5=err.response)!==null&&_err$response5!==void 0&&(_err$response5$data=_err$response5.data)!==null&&_err$response5$data!==void 0&&_err$response5$data.error){errorMessage=err.response.data.error;}else if(err!==null&&err!==void 0&&(_err$response6=err.response)!==null&&_err$response6!==void 0&&(_err$response6$data=_err$response6.data)!==null&&_err$response6$data!==void 0&&_err$response6$data.message){errorMessage=err.response.data.message;}else if(err!==null&&err!==void 0&&err.message){errorMessage=err.message;}setError(errorMessage);}};// Debug log for component state\nconsole.log('TimetableGenerator state:',{selectedFile:selectedFile===null||selectedFile===void 0?void 0:selectedFile.name,uploadId,isProcessing,progress,generatedDataLength:generatedData.length,error});return/*#__PURE__*/_jsxs(\"div\",{className:\"timetable-generator\",children:[/*#__PURE__*/_jsx(Header,{onShowInstructions:()=>setShowInstructions(true)}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-container\",children:[/*#__PURE__*/_jsx(FileUpload,{selectedFile:selectedFile,onFileSelect:handleFileSelect,onFileReset:handleFileReset,onGenerate:handleGenerate,isProcessing:isProcessing,progress:progress,progressText:progressText,error:error,disableGenerate:!!selectedFile&&(!generations||isProcessing),showGenerationsSelector:!!selectedFile&&awaitingGenerations,generations:generations,onGenerationsChange:val=>setGenerations(val)}),uploadId&&!isProcessing&&/*#__PURE__*/_jsx(TimetableResults,{uploadId:uploadId}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",style:{color:'#dc3545',backgroundColor:'#f8d7da',border:'1px solid #f5c6cb',borderRadius:'4px',padding:'12px',marginTop:'16px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]})]}),/*#__PURE__*/_jsx(InstructionsModal,{isOpen:showInstructions,onClose:()=>setShowInstructions(false)})]});};export default TimetableGenerator;","map":{"version":3,"names":["React","useState","Header","FileUpload","TimetableResults","InstructionsModal","uploadFile","generateTimetable","downloadTimetable","jsx","_jsx","jsxs","_jsxs","TimetableGenerator","selectedFile","setSelectedFile","uploadId","setUploadId","isProcessing","setIsProcessing","progress","setProgress","progressText","setProgressText","generatedData","setGeneratedData","showInstructions","setShowInstructions","error","setError","generations","setGenerations","awaitingGenerations","setAwaitingGenerations","handleFileSelect","file","console","log","handleFileReset","startGeneration","currentUploadId","progressCallback","progressData","pct","percentage","clampedProgress","Math","min","max","message","gens","parseInt","options","Number","isFinite","max_generations","timetableData","timetables","_timetableData$data","data","results","Array","isArray","warn","setTimeout","handleGenerate","name","uploadResponse","upload_id","fileId","id","meta","Error","JSON","stringify","err","_err$response","_err$response$data","_err$response2","_err$response2$data","errorMessage","response","_err$response3","_err$response3$data","_err$response4","_err$response4$data","handleDownload","format","length","concat","_err$response5","_err$response5$data","_err$response6","_err$response6$data","generatedDataLength","className","children","onShowInstructions","onFileSelect","onFileReset","onGenerate","disableGenerate","showGenerationsSelector","onGenerationsChange","val","style","color","backgroundColor","border","borderRadius","padding","marginTop","fontSize","isOpen","onClose"],"sources":["C:/Users/Jamil/Downloads/Timetable-Scheduler-Fullstack/Frontend/PAU-Timetable_Scheduler/src/components/TimetableGenerator.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Header from './Header';\r\nimport FileUpload from './FileUpload';\r\nimport TimetableResults from './TimetableResults';\r\nimport InstructionsModal from './InstructionsModal';\r\nimport { uploadFile, generateTimetable, downloadTimetable } from '../services/api.js';\r\nimport './TimetableGenerator.css';\r\n\r\nconst TimetableGenerator = () => {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [uploadId, setUploadId] = useState(null); // Track upload ID for downloads\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [progressText, setProgressText] = useState('');\r\n  const [generatedData, setGeneratedData] = useState([]);\r\n  const [showInstructions, setShowInstructions] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // New state: ask user for number of generations\r\n  const [generations, setGenerations] = useState('');\r\n  const [awaitingGenerations, setAwaitingGenerations] = useState(false);\r\n\r\n  const handleFileSelect = (file) => {\r\n    console.log('File selected:', file);\r\n    setSelectedFile(file);\r\n    setError('');\r\n    setGeneratedData([]);\r\n    setUploadId(null); // Reset upload ID\r\n    setGenerations('');\r\n    // Immediately show generations selector with the first appearance of Generate button\r\n    setAwaitingGenerations(true);\r\n  };\r\n\r\n  const handleFileReset = () => {\r\n    console.log('Resetting file selection');\r\n    setSelectedFile(null);\r\n    setUploadId(null);\r\n    setIsProcessing(false);\r\n    setProgress(0);\r\n    setProgressText('');\r\n    setGeneratedData([]);\r\n    setError('');\r\n    setGenerations('');\r\n    setAwaitingGenerations(false);\r\n  };\r\n\r\n  const startGeneration = async (currentUploadId) => {\r\n    // Start generation with progress updates and user-provided generations\r\n    setProgress(30);\r\n    setProgressText('Starting timetable generation...');\r\n\r\n    const progressCallback = (progressData) => {\r\n      console.log('Progress update:', progressData);\r\n      if (!progressData) return;\r\n      const pct = typeof progressData.percentage === 'number' ? progressData.percentage : null;\r\n      if (pct !== null) {\r\n        // Allow progress to reach 100 when backend reports completion\r\n        const clampedProgress = Math.min(Math.max(pct, 30), 100);\r\n        setProgress(clampedProgress);\r\n      }\r\n      if (progressData.message) {\r\n        setProgressText(progressData.message);\r\n      }\r\n    };\r\n\r\n    // Build options: require generations\r\n    const gens = parseInt(generations, 10);\r\n    const options = Number.isFinite(gens) && gens > 0 ? { max_generations: gens } : {};\r\n\r\n    // Generate timetable using the upload ID with options\r\n    console.log('Generating timetable with ID:', currentUploadId, 'options:', options);\r\n    const timetableData = await generateTimetable(currentUploadId, progressCallback, options);\r\n    console.log('Timetable generation completed:', timetableData);\r\n\r\n    // Extract timetables from response - handle different response formats\r\n    let timetables = [];\r\n    if (timetableData) {\r\n      timetables =\r\n        timetableData.timetables ||\r\n        timetableData.data?.timetables ||\r\n        timetableData.results ||\r\n        (Array.isArray(timetableData) ? timetableData : []);\r\n    }\r\n\r\n    console.log('Extracted timetables:', timetables);\r\n\r\n    if (!Array.isArray(timetables)) {\r\n      console.warn('Timetables is not an array, converting:', timetables);\r\n      timetables = timetables ? [timetables] : [];\r\n    }\r\n\r\n    setProgress(100);\r\n    setProgressText('Complete!');\r\n    setGeneratedData(timetables);\r\n\r\n    setTimeout(() => {\r\n      setIsProcessing(false);\r\n      setProgress(0);\r\n      setProgressText('');\r\n    }, 1500);\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    if (!selectedFile || isProcessing) {\r\n      console.log('Cannot generate: no file selected or already processing');\r\n      return;\r\n    }\r\n\r\n    // Ensure valid generations before proceeding\r\n    const gens = parseInt(generations, 10);\r\n    if (!Number.isFinite(gens) || gens <= 0) {\r\n      setError('Please select the number of generations.');\r\n      return;\r\n    }\r\n\r\n    if (!uploadId) {\r\n      // Perform upload first, then immediately start generation\r\n      console.log('Starting upload then generation...');\r\n      setIsProcessing(true);\r\n      setError('');\r\n      setGeneratedData([]);\r\n      setProgress(5);\r\n      setProgressText('Preparing upload...');\r\n\r\n      try {\r\n        setProgress(10);\r\n        setProgressText('Uploading file...');\r\n        console.log('Uploading file:', selectedFile.name);\r\n\r\n        const uploadResponse = await uploadFile(selectedFile);\r\n        console.log('Upload response:', uploadResponse);\r\n\r\n        const currentUploadId =\r\n          uploadResponse?.uploadId ||\r\n          uploadResponse?.upload_id ||\r\n          uploadResponse?.fileId ||\r\n          uploadResponse?.id ||\r\n          (uploadResponse?.meta && (\r\n            uploadResponse.meta.upload_id ||\r\n            uploadResponse.meta.uploadId ||\r\n            uploadResponse.meta.id\r\n          ));\r\n\r\n        console.log('Extracted upload ID:', currentUploadId);\r\n\r\n        if (!currentUploadId) {\r\n          throw new Error('Upload ID not returned by server. Response: ' + JSON.stringify(uploadResponse));\r\n        }\r\n\r\n        setUploadId(currentUploadId);\r\n        // Hide the selector while processing\r\n        setAwaitingGenerations(false);\r\n        await startGeneration(currentUploadId);\r\n        return;\r\n      } catch (err) {\r\n        console.error('Timetable generation error:', err);\r\n        let errorMessage = 'An error occurred while generating the timetable';\r\n        if (err?.response?.data?.error) {\r\n          errorMessage = err.response.data.error;\r\n        } else if (err?.response?.data?.message) {\r\n          errorMessage = err.response.data.message;\r\n        } else if (err?.message) {\r\n          errorMessage = err.message;\r\n        }\r\n        setError(errorMessage);\r\n        setIsProcessing(false);\r\n        setProgress(0);\r\n        setProgressText('');\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      setIsProcessing(true);\r\n      setAwaitingGenerations(false);\r\n      await startGeneration(uploadId);\r\n    } catch (err) {\r\n      console.error('Timetable generation error:', err);\r\n      let errorMessage = 'An error occurred while generating the timetable';\r\n      if (err?.response?.data?.error) {\r\n        errorMessage = err.response.data.error;\r\n      } else if (err?.response?.data?.message) {\r\n        errorMessage = err.response.data.message;\r\n      } else if (err?.message) {\r\n        errorMessage = err.message;\r\n      }\r\n      setError(errorMessage);\r\n      setIsProcessing(false);\r\n      setProgress(0);\r\n      setProgressText('');\r\n    }\r\n  };\r\n\r\n  const handleDownload = async (format) => {\r\n    if (!uploadId) {\r\n      setError('No timetable data available for download - missing upload ID');\r\n      return;\r\n    }\r\n\r\n    if (generatedData.length === 0) {\r\n      setError('No timetable data available for download - no generated data');\r\n      return;\r\n    }\r\n\r\n    console.log(`Starting download: ${format} format for upload ID: ${uploadId}`);\r\n\r\n    try {\r\n      await downloadTimetable(uploadId, format);\r\n      console.log('Download completed successfully');\r\n    } catch (err) {\r\n      console.error('Download error:', err);\r\n      let errorMessage = 'An error occurred while downloading';\r\n      if (err?.response?.data?.error) {\r\n        errorMessage = err.response.data.error;\r\n      } else if (err?.response?.data?.message) {\r\n        errorMessage = err.response.data.message;\r\n      } else if (err?.message) {\r\n        errorMessage = err.message;\r\n      }\r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Debug log for component state\r\n  console.log('TimetableGenerator state:', {\r\n    selectedFile: selectedFile?.name,\r\n    uploadId,\r\n    isProcessing,\r\n    progress,\r\n    generatedDataLength: generatedData.length,\r\n    error\r\n  });\r\n\r\n  return (\r\n    <div className=\"timetable-generator\">\r\n      <Header\r\n        onShowInstructions={() => setShowInstructions(true)}\r\n      />\r\n\r\n      <main className=\"main-container\">\r\n        <FileUpload\r\n          selectedFile={selectedFile}\r\n          onFileSelect={handleFileSelect}\r\n          onFileReset={handleFileReset}\r\n          onGenerate={handleGenerate}\r\n          isProcessing={isProcessing}\r\n          progress={progress}\r\n          progressText={progressText}\r\n          error={error}\r\n          disableGenerate={!!selectedFile && (!generations || isProcessing)}\r\n          showGenerationsSelector={!!selectedFile && awaitingGenerations}\r\n          generations={generations}\r\n          onGenerationsChange={(val) => setGenerations(val)}\r\n        />\r\n\r\n        {uploadId && !isProcessing && (\r\n          <TimetableResults uploadId={uploadId} />\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"error-message\" style={{ \r\n            color: '#dc3545', \r\n            backgroundColor: '#f8d7da',\r\n            border: '1px solid #f5c6cb',\r\n            borderRadius: '4px',\r\n            padding: '12px',\r\n            marginTop: '16px',\r\n            fontSize: '14px'\r\n          }}>\r\n            <strong>Error:</strong> {error}\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <InstructionsModal\r\n        isOpen={showInstructions}\r\n        onClose={() => setShowInstructions(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimetableGenerator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}