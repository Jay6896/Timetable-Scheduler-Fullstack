{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jamil\\\\Downloads\\\\Timetable-Scheduler-Fullstack\\\\Frontend\\\\PAU-Timetable_Scheduler\\\\src\\\\components\\\\TimetableGenerator.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Header from './Header';\nimport FileUpload from './FileUpload';\nimport TimetableResults from './TimetableResults';\nimport InstructionsModal from './InstructionsModal';\nimport { uploadFile, generateTimetable, downloadTimetable } from '../services/api.js';\nimport './TimetableGenerator.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimetableGenerator = () => {\n  _s();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [uploadId, setUploadId] = useState(null); // Track upload ID for downloads\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [progressText, setProgressText] = useState('');\n  const [generatedData, setGeneratedData] = useState([]);\n  const [showInstructions, setShowInstructions] = useState(false);\n  const [error, setError] = useState('');\n\n  // New state: ask user for number of generations\n  const [generations, setGenerations] = useState('');\n  const [awaitingGenerations, setAwaitingGenerations] = useState(false);\n  const handleFileSelect = file => {\n    console.log('File selected:', file);\n    setSelectedFile(file);\n    setError('');\n    setGeneratedData([]);\n    setUploadId(null); // Reset upload ID\n    setGenerations('');\n    // Immediately show generations selector with the first appearance of Generate button\n    setAwaitingGenerations(true);\n  };\n  const handleFileReset = () => {\n    console.log('Resetting file selection');\n    setSelectedFile(null);\n    setUploadId(null);\n    setIsProcessing(false);\n    setProgress(0);\n    setProgressText('');\n    setGeneratedData([]);\n    setError('');\n    setGenerations('');\n    setAwaitingGenerations(false);\n  };\n  const startGeneration = async currentUploadId => {\n    // Start generation with progress updates and user-provided generations\n    setProgress(30);\n    setProgressText('Starting timetable generation...');\n    const progressCallback = progressData => {\n      console.log('Progress update:', progressData);\n      if (!progressData) return;\n      const pct = typeof progressData.percentage === 'number' ? progressData.percentage : null;\n      if (pct !== null) {\n        // Allow progress to reach 100 when backend reports completion\n        const clampedProgress = Math.min(Math.max(pct, 30), 100);\n        setProgress(clampedProgress);\n      }\n      if (progressData.message) {\n        setProgressText(progressData.message);\n      }\n    };\n\n    // Build options: require generations\n    const gens = parseInt(generations, 10);\n    const options = Number.isFinite(gens) && gens > 0 ? {\n      max_generations: gens\n    } : {};\n\n    // Generate timetable using the upload ID with options\n    console.log('Generating timetable with ID:', currentUploadId, 'options:', options);\n    const timetableData = await generateTimetable(currentUploadId, progressCallback, options);\n    console.log('Timetable generation completed:', timetableData);\n\n    // Extract timetables from response - handle different response formats\n    let timetables = [];\n    if (timetableData) {\n      var _timetableData$data;\n      timetables = timetableData.timetables || ((_timetableData$data = timetableData.data) === null || _timetableData$data === void 0 ? void 0 : _timetableData$data.timetables) || timetableData.results || (Array.isArray(timetableData) ? timetableData : []);\n    }\n    console.log('Extracted timetables:', timetables);\n    if (!Array.isArray(timetables)) {\n      console.warn('Timetables is not an array, converting:', timetables);\n      timetables = timetables ? [timetables] : [];\n    }\n    setProgress(100);\n    setProgressText('Complete!');\n    setGeneratedData(timetables);\n    setTimeout(() => {\n      setIsProcessing(false);\n      setProgress(0);\n      setProgressText('');\n    }, 1500);\n  };\n  const handleGenerate = async () => {\n    if (!selectedFile || isProcessing) {\n      console.log('Cannot generate: no file selected or already processing');\n      return;\n    }\n\n    // Ensure valid generations before proceeding\n    const gens = parseInt(generations, 10);\n    if (!Number.isFinite(gens) || gens <= 0) {\n      setError('Please select the number of generations.');\n      return;\n    }\n    if (!uploadId) {\n      // Perform upload first, then immediately start generation\n      console.log('Starting upload then generation...');\n      setIsProcessing(true);\n      setError('');\n      setGeneratedData([]);\n      setProgress(5);\n      setProgressText('Preparing upload...');\n      try {\n        setProgress(10);\n        setProgressText('Uploading file...');\n        console.log('Uploading file:', selectedFile.name);\n        const uploadResponse = await uploadFile(selectedFile);\n        console.log('Upload response:', uploadResponse);\n        const currentUploadId = (uploadResponse === null || uploadResponse === void 0 ? void 0 : uploadResponse.uploadId) || (uploadResponse === null || uploadResponse === void 0 ? void 0 : uploadResponse.upload_id) || (uploadResponse === null || uploadResponse === void 0 ? void 0 : uploadResponse.fileId) || (uploadResponse === null || uploadResponse === void 0 ? void 0 : uploadResponse.id) || (uploadResponse === null || uploadResponse === void 0 ? void 0 : uploadResponse.meta) && (uploadResponse.meta.upload_id || uploadResponse.meta.uploadId || uploadResponse.meta.id);\n        console.log('Extracted upload ID:', currentUploadId);\n        if (!currentUploadId) {\n          throw new Error('Upload ID not returned by server. Response: ' + JSON.stringify(uploadResponse));\n        }\n        setUploadId(currentUploadId);\n        // Hide the selector while processing\n        setAwaitingGenerations(false);\n        await startGeneration(currentUploadId);\n        return;\n      } catch (err) {\n        var _err$response, _err$response$data, _err$response2, _err$response2$data;\n        console.error('Timetable generation error:', err);\n        let errorMessage = 'An error occurred while generating the timetable';\n        if (err !== null && err !== void 0 && (_err$response = err.response) !== null && _err$response !== void 0 && (_err$response$data = _err$response.data) !== null && _err$response$data !== void 0 && _err$response$data.error) {\n          errorMessage = err.response.data.error;\n        } else if (err !== null && err !== void 0 && (_err$response2 = err.response) !== null && _err$response2 !== void 0 && (_err$response2$data = _err$response2.data) !== null && _err$response2$data !== void 0 && _err$response2$data.message) {\n          errorMessage = err.response.data.message;\n        } else if (err !== null && err !== void 0 && err.message) {\n          errorMessage = err.message;\n        }\n        setError(errorMessage);\n        setIsProcessing(false);\n        setProgress(0);\n        setProgressText('');\n        return;\n      }\n    }\n    try {\n      setIsProcessing(true);\n      setAwaitingGenerations(false);\n      await startGeneration(uploadId);\n    } catch (err) {\n      var _err$response3, _err$response3$data, _err$response4, _err$response4$data;\n      console.error('Timetable generation error:', err);\n      let errorMessage = 'An error occurred while generating the timetable';\n      if (err !== null && err !== void 0 && (_err$response3 = err.response) !== null && _err$response3 !== void 0 && (_err$response3$data = _err$response3.data) !== null && _err$response3$data !== void 0 && _err$response3$data.error) {\n        errorMessage = err.response.data.error;\n      } else if (err !== null && err !== void 0 && (_err$response4 = err.response) !== null && _err$response4 !== void 0 && (_err$response4$data = _err$response4.data) !== null && _err$response4$data !== void 0 && _err$response4$data.message) {\n        errorMessage = err.response.data.message;\n      } else if (err !== null && err !== void 0 && err.message) {\n        errorMessage = err.message;\n      }\n      setError(errorMessage);\n      setIsProcessing(false);\n      setProgress(0);\n      setProgressText('');\n    }\n  };\n  const handleDownload = async format => {\n    if (!uploadId) {\n      setError('No timetable data available for download - missing upload ID');\n      return;\n    }\n    if (generatedData.length === 0) {\n      setError('No timetable data available for download - no generated data');\n      return;\n    }\n    console.log(`Starting download: ${format} format for upload ID: ${uploadId}`);\n    try {\n      await downloadTimetable(uploadId, format);\n      console.log('Download completed successfully');\n    } catch (err) {\n      var _err$response5, _err$response5$data, _err$response6, _err$response6$data;\n      console.error('Download error:', err);\n      let errorMessage = 'An error occurred while downloading';\n      if (err !== null && err !== void 0 && (_err$response5 = err.response) !== null && _err$response5 !== void 0 && (_err$response5$data = _err$response5.data) !== null && _err$response5$data !== void 0 && _err$response5$data.error) {\n        errorMessage = err.response.data.error;\n      } else if (err !== null && err !== void 0 && (_err$response6 = err.response) !== null && _err$response6 !== void 0 && (_err$response6$data = _err$response6.data) !== null && _err$response6$data !== void 0 && _err$response6$data.message) {\n        errorMessage = err.response.data.message;\n      } else if (err !== null && err !== void 0 && err.message) {\n        errorMessage = err.message;\n      }\n      setError(errorMessage);\n    }\n  };\n\n  // Debug log for component state\n  console.log('TimetableGenerator state:', {\n    selectedFile: selectedFile === null || selectedFile === void 0 ? void 0 : selectedFile.name,\n    uploadId,\n    isProcessing,\n    progress,\n    generatedDataLength: generatedData.length,\n    error\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"timetable-generator\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      onShowInstructions: () => setShowInstructions(true),\n      onDownload: handleDownload,\n      canDownload: generatedData.length > 0 && uploadId && !isProcessing\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(FileUpload, {\n        selectedFile: selectedFile,\n        onFileSelect: handleFileSelect,\n        onFileReset: handleFileReset,\n        onGenerate: handleGenerate,\n        isProcessing: isProcessing,\n        progress: progress,\n        progressText: progressText,\n        error: error,\n        disableGenerate: !!selectedFile && (!generations || isProcessing),\n        showGenerationsSelector: !!selectedFile && awaitingGenerations,\n        generations: generations,\n        onGenerationsChange: val => setGenerations(val)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), uploadId && !isProcessing && /*#__PURE__*/_jsxDEV(TimetableResults, {\n        uploadId: uploadId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        style: {\n          color: '#dc3545',\n          backgroundColor: '#f8d7da',\n          border: '1px solid #f5c6cb',\n          borderRadius: '4px',\n          padding: '12px',\n          marginTop: '16px',\n          fontSize: '14px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InstructionsModal, {\n      isOpen: showInstructions,\n      onClose: () => setShowInstructions(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n};\n_s(TimetableGenerator, \"HwHsyXx65/ehQnrPNy3TYvrA5rE=\");\n_c = TimetableGenerator;\nexport default TimetableGenerator;\nvar _c;\n$RefreshReg$(_c, \"TimetableGenerator\");","map":{"version":3,"names":["React","useState","Header","FileUpload","TimetableResults","InstructionsModal","uploadFile","generateTimetable","downloadTimetable","jsxDEV","_jsxDEV","TimetableGenerator","_s","selectedFile","setSelectedFile","uploadId","setUploadId","isProcessing","setIsProcessing","progress","setProgress","progressText","setProgressText","generatedData","setGeneratedData","showInstructions","setShowInstructions","error","setError","generations","setGenerations","awaitingGenerations","setAwaitingGenerations","handleFileSelect","file","console","log","handleFileReset","startGeneration","currentUploadId","progressCallback","progressData","pct","percentage","clampedProgress","Math","min","max","message","gens","parseInt","options","Number","isFinite","max_generations","timetableData","timetables","_timetableData$data","data","results","Array","isArray","warn","setTimeout","handleGenerate","name","uploadResponse","upload_id","fileId","id","meta","Error","JSON","stringify","err","_err$response","_err$response$data","_err$response2","_err$response2$data","errorMessage","response","_err$response3","_err$response3$data","_err$response4","_err$response4$data","handleDownload","format","length","_err$response5","_err$response5$data","_err$response6","_err$response6$data","generatedDataLength","className","children","onShowInstructions","onDownload","canDownload","fileName","_jsxFileName","lineNumber","columnNumber","onFileSelect","onFileReset","onGenerate","disableGenerate","showGenerationsSelector","onGenerationsChange","val","style","color","backgroundColor","border","borderRadius","padding","marginTop","fontSize","isOpen","onClose","_c","$RefreshReg$"],"sources":["C:/Users/Jamil/Downloads/Timetable-Scheduler-Fullstack/Frontend/PAU-Timetable_Scheduler/src/components/TimetableGenerator.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Header from './Header';\r\nimport FileUpload from './FileUpload';\r\nimport TimetableResults from './TimetableResults';\r\nimport InstructionsModal from './InstructionsModal';\r\nimport { uploadFile, generateTimetable, downloadTimetable } from '../services/api.js';\r\nimport './TimetableGenerator.css';\r\n\r\nconst TimetableGenerator = () => {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [uploadId, setUploadId] = useState(null); // Track upload ID for downloads\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [progressText, setProgressText] = useState('');\r\n  const [generatedData, setGeneratedData] = useState([]);\r\n  const [showInstructions, setShowInstructions] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // New state: ask user for number of generations\r\n  const [generations, setGenerations] = useState('');\r\n  const [awaitingGenerations, setAwaitingGenerations] = useState(false);\r\n\r\n  const handleFileSelect = (file) => {\r\n    console.log('File selected:', file);\r\n    setSelectedFile(file);\r\n    setError('');\r\n    setGeneratedData([]);\r\n    setUploadId(null); // Reset upload ID\r\n    setGenerations('');\r\n    // Immediately show generations selector with the first appearance of Generate button\r\n    setAwaitingGenerations(true);\r\n  };\r\n\r\n  const handleFileReset = () => {\r\n    console.log('Resetting file selection');\r\n    setSelectedFile(null);\r\n    setUploadId(null);\r\n    setIsProcessing(false);\r\n    setProgress(0);\r\n    setProgressText('');\r\n    setGeneratedData([]);\r\n    setError('');\r\n    setGenerations('');\r\n    setAwaitingGenerations(false);\r\n  };\r\n\r\n  const startGeneration = async (currentUploadId) => {\r\n    // Start generation with progress updates and user-provided generations\r\n    setProgress(30);\r\n    setProgressText('Starting timetable generation...');\r\n\r\n    const progressCallback = (progressData) => {\r\n      console.log('Progress update:', progressData);\r\n      if (!progressData) return;\r\n      const pct = typeof progressData.percentage === 'number' ? progressData.percentage : null;\r\n      if (pct !== null) {\r\n        // Allow progress to reach 100 when backend reports completion\r\n        const clampedProgress = Math.min(Math.max(pct, 30), 100);\r\n        setProgress(clampedProgress);\r\n      }\r\n      if (progressData.message) {\r\n        setProgressText(progressData.message);\r\n      }\r\n    };\r\n\r\n    // Build options: require generations\r\n    const gens = parseInt(generations, 10);\r\n    const options = Number.isFinite(gens) && gens > 0 ? { max_generations: gens } : {};\r\n\r\n    // Generate timetable using the upload ID with options\r\n    console.log('Generating timetable with ID:', currentUploadId, 'options:', options);\r\n    const timetableData = await generateTimetable(currentUploadId, progressCallback, options);\r\n    console.log('Timetable generation completed:', timetableData);\r\n\r\n    // Extract timetables from response - handle different response formats\r\n    let timetables = [];\r\n    if (timetableData) {\r\n      timetables =\r\n        timetableData.timetables ||\r\n        timetableData.data?.timetables ||\r\n        timetableData.results ||\r\n        (Array.isArray(timetableData) ? timetableData : []);\r\n    }\r\n\r\n    console.log('Extracted timetables:', timetables);\r\n\r\n    if (!Array.isArray(timetables)) {\r\n      console.warn('Timetables is not an array, converting:', timetables);\r\n      timetables = timetables ? [timetables] : [];\r\n    }\r\n\r\n    setProgress(100);\r\n    setProgressText('Complete!');\r\n    setGeneratedData(timetables);\r\n\r\n    setTimeout(() => {\r\n      setIsProcessing(false);\r\n      setProgress(0);\r\n      setProgressText('');\r\n    }, 1500);\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    if (!selectedFile || isProcessing) {\r\n      console.log('Cannot generate: no file selected or already processing');\r\n      return;\r\n    }\r\n\r\n    // Ensure valid generations before proceeding\r\n    const gens = parseInt(generations, 10);\r\n    if (!Number.isFinite(gens) || gens <= 0) {\r\n      setError('Please select the number of generations.');\r\n      return;\r\n    }\r\n\r\n    if (!uploadId) {\r\n      // Perform upload first, then immediately start generation\r\n      console.log('Starting upload then generation...');\r\n      setIsProcessing(true);\r\n      setError('');\r\n      setGeneratedData([]);\r\n      setProgress(5);\r\n      setProgressText('Preparing upload...');\r\n\r\n      try {\r\n        setProgress(10);\r\n        setProgressText('Uploading file...');\r\n        console.log('Uploading file:', selectedFile.name);\r\n\r\n        const uploadResponse = await uploadFile(selectedFile);\r\n        console.log('Upload response:', uploadResponse);\r\n\r\n        const currentUploadId =\r\n          uploadResponse?.uploadId ||\r\n          uploadResponse?.upload_id ||\r\n          uploadResponse?.fileId ||\r\n          uploadResponse?.id ||\r\n          (uploadResponse?.meta && (\r\n            uploadResponse.meta.upload_id ||\r\n            uploadResponse.meta.uploadId ||\r\n            uploadResponse.meta.id\r\n          ));\r\n\r\n        console.log('Extracted upload ID:', currentUploadId);\r\n\r\n        if (!currentUploadId) {\r\n          throw new Error('Upload ID not returned by server. Response: ' + JSON.stringify(uploadResponse));\r\n        }\r\n\r\n        setUploadId(currentUploadId);\r\n        // Hide the selector while processing\r\n        setAwaitingGenerations(false);\r\n        await startGeneration(currentUploadId);\r\n        return;\r\n      } catch (err) {\r\n        console.error('Timetable generation error:', err);\r\n        let errorMessage = 'An error occurred while generating the timetable';\r\n        if (err?.response?.data?.error) {\r\n          errorMessage = err.response.data.error;\r\n        } else if (err?.response?.data?.message) {\r\n          errorMessage = err.response.data.message;\r\n        } else if (err?.message) {\r\n          errorMessage = err.message;\r\n        }\r\n        setError(errorMessage);\r\n        setIsProcessing(false);\r\n        setProgress(0);\r\n        setProgressText('');\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      setIsProcessing(true);\r\n      setAwaitingGenerations(false);\r\n      await startGeneration(uploadId);\r\n    } catch (err) {\r\n      console.error('Timetable generation error:', err);\r\n      let errorMessage = 'An error occurred while generating the timetable';\r\n      if (err?.response?.data?.error) {\r\n        errorMessage = err.response.data.error;\r\n      } else if (err?.response?.data?.message) {\r\n        errorMessage = err.response.data.message;\r\n      } else if (err?.message) {\r\n        errorMessage = err.message;\r\n      }\r\n      setError(errorMessage);\r\n      setIsProcessing(false);\r\n      setProgress(0);\r\n      setProgressText('');\r\n    }\r\n  };\r\n\r\n  const handleDownload = async (format) => {\r\n    if (!uploadId) {\r\n      setError('No timetable data available for download - missing upload ID');\r\n      return;\r\n    }\r\n\r\n    if (generatedData.length === 0) {\r\n      setError('No timetable data available for download - no generated data');\r\n      return;\r\n    }\r\n\r\n    console.log(`Starting download: ${format} format for upload ID: ${uploadId}`);\r\n\r\n    try {\r\n      await downloadTimetable(uploadId, format);\r\n      console.log('Download completed successfully');\r\n    } catch (err) {\r\n      console.error('Download error:', err);\r\n      let errorMessage = 'An error occurred while downloading';\r\n      if (err?.response?.data?.error) {\r\n        errorMessage = err.response.data.error;\r\n      } else if (err?.response?.data?.message) {\r\n        errorMessage = err.response.data.message;\r\n      } else if (err?.message) {\r\n        errorMessage = err.message;\r\n      }\r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Debug log for component state\r\n  console.log('TimetableGenerator state:', {\r\n    selectedFile: selectedFile?.name,\r\n    uploadId,\r\n    isProcessing,\r\n    progress,\r\n    generatedDataLength: generatedData.length,\r\n    error\r\n  });\r\n\r\n  return (\r\n    <div className=\"timetable-generator\">\r\n      <Header\r\n        onShowInstructions={() => setShowInstructions(true)}\r\n        onDownload={handleDownload}\r\n        canDownload={generatedData.length > 0 && uploadId && !isProcessing}\r\n      />\r\n\r\n      <main className=\"main-container\">\r\n        <FileUpload\r\n          selectedFile={selectedFile}\r\n          onFileSelect={handleFileSelect}\r\n          onFileReset={handleFileReset}\r\n          onGenerate={handleGenerate}\r\n          isProcessing={isProcessing}\r\n          progress={progress}\r\n          progressText={progressText}\r\n          error={error}\r\n          disableGenerate={!!selectedFile && (!generations || isProcessing)}\r\n          showGenerationsSelector={!!selectedFile && awaitingGenerations}\r\n          generations={generations}\r\n          onGenerationsChange={(val) => setGenerations(val)}\r\n        />\r\n\r\n        {uploadId && !isProcessing && (\r\n          <TimetableResults uploadId={uploadId} />\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"error-message\" style={{ \r\n            color: '#dc3545', \r\n            backgroundColor: '#f8d7da',\r\n            border: '1px solid #f5c6cb',\r\n            borderRadius: '4px',\r\n            padding: '12px',\r\n            marginTop: '16px',\r\n            fontSize: '14px'\r\n          }}>\r\n            <strong>Error:</strong> {error}\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <InstructionsModal\r\n        isOpen={showInstructions}\r\n        onClose={() => setShowInstructions(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimetableGenerator;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,SAASC,UAAU,EAAEC,iBAAiB,EAAEC,iBAAiB,QAAQ,oBAAoB;AACrF,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAChD,MAAM,CAACgB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACoB,YAAY,EAAEC,eAAe,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACsB,aAAa,EAAEC,gBAAgB,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACwB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAAC0B,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;;EAEtC;EACA,MAAM,CAAC4B,WAAW,EAAEC,cAAc,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAAC8B,mBAAmB,EAAEC,sBAAsB,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EAErE,MAAMgC,gBAAgB,GAAIC,IAAI,IAAK;IACjCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,IAAI,CAAC;IACnCpB,eAAe,CAACoB,IAAI,CAAC;IACrBN,QAAQ,CAAC,EAAE,CAAC;IACZJ,gBAAgB,CAAC,EAAE,CAAC;IACpBR,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;IACnBc,cAAc,CAAC,EAAE,CAAC;IAClB;IACAE,sBAAsB,CAAC,IAAI,CAAC;EAC9B,CAAC;EAED,MAAMK,eAAe,GAAGA,CAAA,KAAM;IAC5BF,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvCtB,eAAe,CAAC,IAAI,CAAC;IACrBE,WAAW,CAAC,IAAI,CAAC;IACjBE,eAAe,CAAC,KAAK,CAAC;IACtBE,WAAW,CAAC,CAAC,CAAC;IACdE,eAAe,CAAC,EAAE,CAAC;IACnBE,gBAAgB,CAAC,EAAE,CAAC;IACpBI,QAAQ,CAAC,EAAE,CAAC;IACZE,cAAc,CAAC,EAAE,CAAC;IAClBE,sBAAsB,CAAC,KAAK,CAAC;EAC/B,CAAC;EAED,MAAMM,eAAe,GAAG,MAAOC,eAAe,IAAK;IACjD;IACAnB,WAAW,CAAC,EAAE,CAAC;IACfE,eAAe,CAAC,kCAAkC,CAAC;IAEnD,MAAMkB,gBAAgB,GAAIC,YAAY,IAAK;MACzCN,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEK,YAAY,CAAC;MAC7C,IAAI,CAACA,YAAY,EAAE;MACnB,MAAMC,GAAG,GAAG,OAAOD,YAAY,CAACE,UAAU,KAAK,QAAQ,GAAGF,YAAY,CAACE,UAAU,GAAG,IAAI;MACxF,IAAID,GAAG,KAAK,IAAI,EAAE;QAChB;QACA,MAAME,eAAe,GAAGC,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAACL,GAAG,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC;QACxDtB,WAAW,CAACwB,eAAe,CAAC;MAC9B;MACA,IAAIH,YAAY,CAACO,OAAO,EAAE;QACxB1B,eAAe,CAACmB,YAAY,CAACO,OAAO,CAAC;MACvC;IACF,CAAC;;IAED;IACA,MAAMC,IAAI,GAAGC,QAAQ,CAACrB,WAAW,EAAE,EAAE,CAAC;IACtC,MAAMsB,OAAO,GAAGC,MAAM,CAACC,QAAQ,CAACJ,IAAI,CAAC,IAAIA,IAAI,GAAG,CAAC,GAAG;MAAEK,eAAe,EAAEL;IAAK,CAAC,GAAG,CAAC,CAAC;;IAElF;IACAd,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEG,eAAe,EAAE,UAAU,EAAEY,OAAO,CAAC;IAClF,MAAMI,aAAa,GAAG,MAAMhD,iBAAiB,CAACgC,eAAe,EAAEC,gBAAgB,EAAEW,OAAO,CAAC;IACzFhB,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEmB,aAAa,CAAC;;IAE7D;IACA,IAAIC,UAAU,GAAG,EAAE;IACnB,IAAID,aAAa,EAAE;MAAA,IAAAE,mBAAA;MACjBD,UAAU,GACRD,aAAa,CAACC,UAAU,MAAAC,mBAAA,GACxBF,aAAa,CAACG,IAAI,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBD,UAAU,KAC9BD,aAAa,CAACI,OAAO,KACpBC,KAAK,CAACC,OAAO,CAACN,aAAa,CAAC,GAAGA,aAAa,GAAG,EAAE,CAAC;IACvD;IAEApB,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEoB,UAAU,CAAC;IAEhD,IAAI,CAACI,KAAK,CAACC,OAAO,CAACL,UAAU,CAAC,EAAE;MAC9BrB,OAAO,CAAC2B,IAAI,CAAC,yCAAyC,EAAEN,UAAU,CAAC;MACnEA,UAAU,GAAGA,UAAU,GAAG,CAACA,UAAU,CAAC,GAAG,EAAE;IAC7C;IAEApC,WAAW,CAAC,GAAG,CAAC;IAChBE,eAAe,CAAC,WAAW,CAAC;IAC5BE,gBAAgB,CAACgC,UAAU,CAAC;IAE5BO,UAAU,CAAC,MAAM;MACf7C,eAAe,CAAC,KAAK,CAAC;MACtBE,WAAW,CAAC,CAAC,CAAC;MACdE,eAAe,CAAC,EAAE,CAAC;IACrB,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;EAED,MAAM0C,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAACnD,YAAY,IAAII,YAAY,EAAE;MACjCkB,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC;MACtE;IACF;;IAEA;IACA,MAAMa,IAAI,GAAGC,QAAQ,CAACrB,WAAW,EAAE,EAAE,CAAC;IACtC,IAAI,CAACuB,MAAM,CAACC,QAAQ,CAACJ,IAAI,CAAC,IAAIA,IAAI,IAAI,CAAC,EAAE;MACvCrB,QAAQ,CAAC,0CAA0C,CAAC;MACpD;IACF;IAEA,IAAI,CAACb,QAAQ,EAAE;MACb;MACAoB,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;MACjDlB,eAAe,CAAC,IAAI,CAAC;MACrBU,QAAQ,CAAC,EAAE,CAAC;MACZJ,gBAAgB,CAAC,EAAE,CAAC;MACpBJ,WAAW,CAAC,CAAC,CAAC;MACdE,eAAe,CAAC,qBAAqB,CAAC;MAEtC,IAAI;QACFF,WAAW,CAAC,EAAE,CAAC;QACfE,eAAe,CAAC,mBAAmB,CAAC;QACpCa,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEvB,YAAY,CAACoD,IAAI,CAAC;QAEjD,MAAMC,cAAc,GAAG,MAAM5D,UAAU,CAACO,YAAY,CAAC;QACrDsB,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAE8B,cAAc,CAAC;QAE/C,MAAM3B,eAAe,GACnB,CAAA2B,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEnD,QAAQ,MACxBmD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEC,SAAS,MACzBD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEE,MAAM,MACtBF,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEG,EAAE,KACjB,CAAAH,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEI,IAAI,MACnBJ,cAAc,CAACI,IAAI,CAACH,SAAS,IAC7BD,cAAc,CAACI,IAAI,CAACvD,QAAQ,IAC5BmD,cAAc,CAACI,IAAI,CAACD,EAAE,CACtB;QAEJlC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,eAAe,CAAC;QAEpD,IAAI,CAACA,eAAe,EAAE;UACpB,MAAM,IAAIgC,KAAK,CAAC,8CAA8C,GAAGC,IAAI,CAACC,SAAS,CAACP,cAAc,CAAC,CAAC;QAClG;QAEAlD,WAAW,CAACuB,eAAe,CAAC;QAC5B;QACAP,sBAAsB,CAAC,KAAK,CAAC;QAC7B,MAAMM,eAAe,CAACC,eAAe,CAAC;QACtC;MACF,CAAC,CAAC,OAAOmC,GAAG,EAAE;QAAA,IAAAC,aAAA,EAAAC,kBAAA,EAAAC,cAAA,EAAAC,mBAAA;QACZ3C,OAAO,CAACR,KAAK,CAAC,6BAA6B,EAAE+C,GAAG,CAAC;QACjD,IAAIK,YAAY,GAAG,kDAAkD;QACrE,IAAIL,GAAG,aAAHA,GAAG,gBAAAC,aAAA,GAAHD,GAAG,CAAEM,QAAQ,cAAAL,aAAA,gBAAAC,kBAAA,GAAbD,aAAA,CAAejB,IAAI,cAAAkB,kBAAA,eAAnBA,kBAAA,CAAqBjD,KAAK,EAAE;UAC9BoD,YAAY,GAAGL,GAAG,CAACM,QAAQ,CAACtB,IAAI,CAAC/B,KAAK;QACxC,CAAC,MAAM,IAAI+C,GAAG,aAAHA,GAAG,gBAAAG,cAAA,GAAHH,GAAG,CAAEM,QAAQ,cAAAH,cAAA,gBAAAC,mBAAA,GAAbD,cAAA,CAAenB,IAAI,cAAAoB,mBAAA,eAAnBA,mBAAA,CAAqB9B,OAAO,EAAE;UACvC+B,YAAY,GAAGL,GAAG,CAACM,QAAQ,CAACtB,IAAI,CAACV,OAAO;QAC1C,CAAC,MAAM,IAAI0B,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAE1B,OAAO,EAAE;UACvB+B,YAAY,GAAGL,GAAG,CAAC1B,OAAO;QAC5B;QACApB,QAAQ,CAACmD,YAAY,CAAC;QACtB7D,eAAe,CAAC,KAAK,CAAC;QACtBE,WAAW,CAAC,CAAC,CAAC;QACdE,eAAe,CAAC,EAAE,CAAC;QACnB;MACF;IACF;IAEA,IAAI;MACFJ,eAAe,CAAC,IAAI,CAAC;MACrBc,sBAAsB,CAAC,KAAK,CAAC;MAC7B,MAAMM,eAAe,CAACvB,QAAQ,CAAC;IACjC,CAAC,CAAC,OAAO2D,GAAG,EAAE;MAAA,IAAAO,cAAA,EAAAC,mBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACZjD,OAAO,CAACR,KAAK,CAAC,6BAA6B,EAAE+C,GAAG,CAAC;MACjD,IAAIK,YAAY,GAAG,kDAAkD;MACrE,IAAIL,GAAG,aAAHA,GAAG,gBAAAO,cAAA,GAAHP,GAAG,CAAEM,QAAQ,cAAAC,cAAA,gBAAAC,mBAAA,GAAbD,cAAA,CAAevB,IAAI,cAAAwB,mBAAA,eAAnBA,mBAAA,CAAqBvD,KAAK,EAAE;QAC9BoD,YAAY,GAAGL,GAAG,CAACM,QAAQ,CAACtB,IAAI,CAAC/B,KAAK;MACxC,CAAC,MAAM,IAAI+C,GAAG,aAAHA,GAAG,gBAAAS,cAAA,GAAHT,GAAG,CAAEM,QAAQ,cAAAG,cAAA,gBAAAC,mBAAA,GAAbD,cAAA,CAAezB,IAAI,cAAA0B,mBAAA,eAAnBA,mBAAA,CAAqBpC,OAAO,EAAE;QACvC+B,YAAY,GAAGL,GAAG,CAACM,QAAQ,CAACtB,IAAI,CAACV,OAAO;MAC1C,CAAC,MAAM,IAAI0B,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAE1B,OAAO,EAAE;QACvB+B,YAAY,GAAGL,GAAG,CAAC1B,OAAO;MAC5B;MACApB,QAAQ,CAACmD,YAAY,CAAC;MACtB7D,eAAe,CAAC,KAAK,CAAC;MACtBE,WAAW,CAAC,CAAC,CAAC;MACdE,eAAe,CAAC,EAAE,CAAC;IACrB;EACF,CAAC;EAED,MAAM+D,cAAc,GAAG,MAAOC,MAAM,IAAK;IACvC,IAAI,CAACvE,QAAQ,EAAE;MACba,QAAQ,CAAC,8DAA8D,CAAC;MACxE;IACF;IAEA,IAAIL,aAAa,CAACgE,MAAM,KAAK,CAAC,EAAE;MAC9B3D,QAAQ,CAAC,8DAA8D,CAAC;MACxE;IACF;IAEAO,OAAO,CAACC,GAAG,CAAC,sBAAsBkD,MAAM,0BAA0BvE,QAAQ,EAAE,CAAC;IAE7E,IAAI;MACF,MAAMP,iBAAiB,CAACO,QAAQ,EAAEuE,MAAM,CAAC;MACzCnD,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;IAChD,CAAC,CAAC,OAAOsC,GAAG,EAAE;MAAA,IAAAc,cAAA,EAAAC,mBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACZxD,OAAO,CAACR,KAAK,CAAC,iBAAiB,EAAE+C,GAAG,CAAC;MACrC,IAAIK,YAAY,GAAG,qCAAqC;MACxD,IAAIL,GAAG,aAAHA,GAAG,gBAAAc,cAAA,GAAHd,GAAG,CAAEM,QAAQ,cAAAQ,cAAA,gBAAAC,mBAAA,GAAbD,cAAA,CAAe9B,IAAI,cAAA+B,mBAAA,eAAnBA,mBAAA,CAAqB9D,KAAK,EAAE;QAC9BoD,YAAY,GAAGL,GAAG,CAACM,QAAQ,CAACtB,IAAI,CAAC/B,KAAK;MACxC,CAAC,MAAM,IAAI+C,GAAG,aAAHA,GAAG,gBAAAgB,cAAA,GAAHhB,GAAG,CAAEM,QAAQ,cAAAU,cAAA,gBAAAC,mBAAA,GAAbD,cAAA,CAAehC,IAAI,cAAAiC,mBAAA,eAAnBA,mBAAA,CAAqB3C,OAAO,EAAE;QACvC+B,YAAY,GAAGL,GAAG,CAACM,QAAQ,CAACtB,IAAI,CAACV,OAAO;MAC1C,CAAC,MAAM,IAAI0B,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAE1B,OAAO,EAAE;QACvB+B,YAAY,GAAGL,GAAG,CAAC1B,OAAO;MAC5B;MACApB,QAAQ,CAACmD,YAAY,CAAC;IACxB;EACF,CAAC;;EAED;EACA5C,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE;IACvCvB,YAAY,EAAEA,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEoD,IAAI;IAChClD,QAAQ;IACRE,YAAY;IACZE,QAAQ;IACRyE,mBAAmB,EAAErE,aAAa,CAACgE,MAAM;IACzC5D;EACF,CAAC,CAAC;EAEF,oBACEjB,OAAA;IAAKmF,SAAS,EAAC,qBAAqB;IAAAC,QAAA,gBAClCpF,OAAA,CAACR,MAAM;MACL6F,kBAAkB,EAAEA,CAAA,KAAMrE,mBAAmB,CAAC,IAAI,CAAE;MACpDsE,UAAU,EAAEX,cAAe;MAC3BY,WAAW,EAAE1E,aAAa,CAACgE,MAAM,GAAG,CAAC,IAAIxE,QAAQ,IAAI,CAACE;IAAa;MAAAiF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpE,CAAC,eAEF3F,OAAA;MAAMmF,SAAS,EAAC,gBAAgB;MAAAC,QAAA,gBAC9BpF,OAAA,CAACP,UAAU;QACTU,YAAY,EAAEA,YAAa;QAC3ByF,YAAY,EAAErE,gBAAiB;QAC/BsE,WAAW,EAAElE,eAAgB;QAC7BmE,UAAU,EAAExC,cAAe;QAC3B/C,YAAY,EAAEA,YAAa;QAC3BE,QAAQ,EAAEA,QAAS;QACnBE,YAAY,EAAEA,YAAa;QAC3BM,KAAK,EAAEA,KAAM;QACb8E,eAAe,EAAE,CAAC,CAAC5F,YAAY,KAAK,CAACgB,WAAW,IAAIZ,YAAY,CAAE;QAClEyF,uBAAuB,EAAE,CAAC,CAAC7F,YAAY,IAAIkB,mBAAoB;QAC/DF,WAAW,EAAEA,WAAY;QACzB8E,mBAAmB,EAAGC,GAAG,IAAK9E,cAAc,CAAC8E,GAAG;MAAE;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC,EAEDtF,QAAQ,IAAI,CAACE,YAAY,iBACxBP,OAAA,CAACN,gBAAgB;QAACW,QAAQ,EAAEA;MAAS;QAAAmF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CACxC,EAEA1E,KAAK,iBACJjB,OAAA;QAAKmF,SAAS,EAAC,eAAe;QAACgB,KAAK,EAAE;UACpCC,KAAK,EAAE,SAAS;UAChBC,eAAe,EAAE,SAAS;UAC1BC,MAAM,EAAE,mBAAmB;UAC3BC,YAAY,EAAE,KAAK;UACnBC,OAAO,EAAE,MAAM;UACfC,SAAS,EAAE,MAAM;UACjBC,QAAQ,EAAE;QACZ,CAAE;QAAAtB,QAAA,gBACApF,OAAA;UAAAoF,QAAA,EAAQ;QAAM;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC1E,KAAK;MAAA;QAAAuE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3B,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC,eAEP3F,OAAA,CAACL,iBAAiB;MAChBgH,MAAM,EAAE5F,gBAAiB;MACzB6F,OAAO,EAAEA,CAAA,KAAM5F,mBAAmB,CAAC,KAAK;IAAE;MAAAwE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3C,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAACzF,EAAA,CAlRID,kBAAkB;AAAA4G,EAAA,GAAlB5G,kBAAkB;AAoRxB,eAAeA,kBAAkB;AAAC,IAAA4G,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}