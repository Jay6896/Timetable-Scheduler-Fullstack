{"ast":null,"code":"import axios from 'axios';\n\n// Determine API base URL based on environment\nconst getApiBaseUrl = () => {\n  // For development, use relative URLs with /api prefix to work with proxy\n  if (process.env.NODE_ENV === 'development') {\n    return '/api';\n  }\n  // Always prefer explicit env override if provided\n  if (process.env.REACT_APP_API_BASE_URL) return process.env.REACT_APP_API_BASE_URL;\n  // Default to local Flask backend\n  return 'http://localhost:7860/api';\n};\nconst API_BASE_URL = getApiBaseUrl();\n\n// Create axios instance with CORS-friendly config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 300000,\n  // 5 minutes timeout for large file processing\n  withCredentials: false,\n  // Important for CORS\n  headers: {\n    'Accept': 'application/json'\n    // Content-Type set conditionally in interceptor\n  }\n});\n\n// Add request interceptor for logging and proper headers\napiClient.interceptors.request.use(config => {\n  const method = (config.method || 'GET').toUpperCase();\n  const url = config.baseURL ? `${config.baseURL}${config.url}` : config.url;\n  console.log(`Making ${method} request to ${url}`);\n\n  // Set appropriate headers for different request types\n  if (config.data instanceof FormData) {\n    // For file uploads, let browser set Content-Type with boundary\n    if (config.headers) {\n      delete config.headers['Content-Type'];\n    }\n  } else if (typeof config.data === 'object' && config.data !== null) {\n    // For JSON data\n    if (config.headers) {\n      config.headers['Content-Type'] = 'application/json';\n    }\n  }\n\n  // Do NOT set Access-Control-Allow-* on requests (these are response headers)\n  return config;\n}, error => {\n  console.error('Request error:', error);\n  return Promise.reject(error);\n});\n\n// Add response interceptor for error handling\napiClient.interceptors.response.use(response => response, error => {\n  console.error('API Error:', error);\n\n  // Distinguish unreachable backend vs actual CORS rejection\n  if (error.request && !error.response) {\n    // Network error / connection refused\n    if (error.code === 'ERR_NETWORK' || error.message && error.message.includes('Network Error')) {\n      throw new Error('Cannot reach backend server. Ensure it is running and the API base URL is correct.');\n    }\n  }\n  if (error.response) {\n    const {\n      status,\n      data\n    } = error.response;\n\n    // Some browsers report CORS failures with opaque responses (status 0)\n    if (status === 0) {\n      throw new Error('CORS error: Backend did not allow this origin.');\n    }\n    const message = (data === null || data === void 0 ? void 0 : data.message) || (data === null || data === void 0 ? void 0 : data.error) || `Server error (${status})`;\n    throw new Error(message);\n  }\n\n  // Fallback\n  throw new Error(error.message || 'An unexpected error occurred');\n});\n\n/**\r\n * Make a CORS-safe request with retry logic\r\n * @param {Function} requestFn - The axios request function\r\n * @param {number} retries - Number of retries\r\n */\nconst makeRequestWithRetry = async (requestFn, retries = 3) => {\n  for (let i = 0; i < retries; i++) {\n    try {\n      return await requestFn();\n    } catch (error) {\n      if (i === retries - 1) throw error;\n      const msg = (error === null || error === void 0 ? void 0 : error.message) || '';\n      // If temporary network/CORS-like error, wait and retry\n      if (msg.toLowerCase().includes('cors') || msg.toLowerCase().includes('backend') || msg.toLowerCase().includes('network')) {\n        console.log(`Temporary connectivity error, retrying... (${i + 1}/${retries})`);\n        await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));\n      } else {\n        throw error;\n      }\n    }\n  }\n};\n\n/**\r\n * Upload file to the server with CORS handling\r\n * @param {File} file - The Excel file to upload\r\n * @returns {Promise<Object>} Response containing file ID and metadata\r\n */\nexport const uploadFile = async file => {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('filename', file.name);\n  const uploadEndpoint = process.env.REACT_APP_UPLOAD_ENDPOINT || '/upload-excel';\n  try {\n    const response = await makeRequestWithRetry(() => apiClient.post(uploadEndpoint, formData));\n    const data = response.data;\n    const uploadId = data.upload_id || data.uploadId || data.id; // defensive read\n    if (!uploadId) throw new Error('upload_id not returned by server');\n    console.log('Upload successful:', data);\n    return {\n      uploadId,\n      meta: data\n    };\n  } catch (err) {\n    var _err$response, _err$response$data;\n    console.error('Upload error details:', err);\n    const message = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message || 'Upload failed';\n    throw new Error(`File upload failed: ${message}`);\n  }\n};\n\n/**\r\n * Generate timetable from uploaded file\r\n * @param {string} uploadId - ID of the uploaded file\r\n * @param {Function} progressCallback - Callback for progress updates\r\n * @param {Object} options - Optional parameters to override defaults (e.g., max_generations)\r\n * @returns {Promise<Object>} Generated timetable data\r\n */\nexport const generateTimetable = async (uploadId, progressCallback, options) => {\n  try {\n    // Start the generation process\n    const body = {\n      upload_id: uploadId,\n      config: {\n        population_size: Number(process.env.REACT_APP_DE_POP_SIZE) || 25,\n        max_generations: Number(process.env.REACT_APP_DE_MAX_GENS) || 10,\n        F: Number(process.env.REACT_APP_DE_F) || 0.4,\n        CR: Number(process.env.REACT_APP_DE_CR) || 0.9\n      }\n    };\n\n    // Allow overrides from caller (e.g., user-provided generations)\n    if (options && typeof options === 'object') {\n      body.config = {\n        ...body.config,\n        ...options\n      };\n    }\n    console.log('Starting timetable generation with:', body);\n    const startResponse = await makeRequestWithRetry(() => apiClient.post('/generate-timetable', body));\n    if (startResponse.status !== 202) {\n      throw new Error('Failed to start timetable generation');\n    }\n    console.log('Generation started, polling for status...');\n    // Poll for status updates\n    return await pollForCompletion(uploadId, progressCallback);\n  } catch (error) {\n    var _error$response, _error$response$data;\n    console.error('Generation error:', error);\n    const msg = (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || (error === null || error === void 0 ? void 0 : error.message) || 'Unknown error';\n    throw new Error(`Timetable generation failed: ${msg}`);\n  }\n};\n\n/**\r\n * Poll the server for generation completion status with CORS handling\r\n * @param {string} uploadId - Upload ID to check status for\r\n * @param {Function} progressCallback - Progress update callback\r\n * @returns {Promise<Object>} Final timetable data\r\n */\nconst pollForCompletion = async (uploadId, progressCallback) => {\n  const maxAttempts = 120; // 10 minutes with 5-second intervals\n  let attempts = 0;\n  return new Promise((resolve, reject) => {\n    const checkStatus = async () => {\n      try {\n        attempts++;\n        const statusResponse = await makeRequestWithRetry(() => apiClient.get(`/get-timetable-status/${uploadId}`));\n        const statusData = statusResponse && statusResponse.data ? statusResponse.data : {};\n\n        // Normalize status and derive sensible defaults\n        const normalized = {\n          status: statusData.status || statusData.State || statusData.state,\n          progress: typeof statusData.progress === 'number' ? statusData.progress : 0,\n          message: statusData.message || '',\n          result: statusData.result,\n          error: statusData.error || statusData.Error\n        };\n\n        // If backend returned a completed result but no explicit status\n        if (!normalized.status && normalized.result) {\n          normalized.status = 'completed';\n        }\n        // If backend indicates error but no explicit status\n        if (!normalized.status && normalized.error) {\n          normalized.status = 'error';\n        }\n        // Default to processing if still undefined but HTTP 200\n        if (!normalized.status) {\n          normalized.status = 'processing';\n        }\n\n        // Update progress UI\n        if (progressCallback) {\n          progressCallback({\n            percentage: normalized.progress,\n            message: normalized.message || 'Processing...'\n          });\n        }\n        if (normalized.status === 'completed') {\n          const result = normalized.result;\n          if (result) {\n            if (!result.timetables && result.timetables_raw) {\n              result.timetables = result.timetables_raw;\n            }\n            if (result.parsed_timetables && result.timetables) {\n              result.timetables = result.timetables.map((timetable, index) => {\n                const parsed = result.parsed_timetables[index];\n                return {\n                  ...timetable,\n                  rows: parsed ? parsed.rows : []\n                };\n              });\n            }\n          }\n          // ensure UI reflects completion\n          if (progressCallback) {\n            progressCallback({\n              percentage: 100,\n              message: 'Completed'\n            });\n          }\n          resolve(result);\n          return;\n        }\n        if (normalized.status === 'error') {\n          reject(new Error(normalized.error || 'Generation failed'));\n          return;\n        }\n\n        // Still processing, continue polling\n        if (attempts >= maxAttempts) {\n          reject(new Error('Generation timeout - please try again'));\n          return;\n        }\n        setTimeout(checkStatus, 5000);\n        return;\n      } catch (error) {\n        console.error('Status check error:', error);\n        if (error.message.includes('CORS')) {\n          reject(new Error('CORS policy is blocking requests to the backend. Please check the server configuration.'));\n        } else {\n          reject(error);\n        }\n      }\n    };\n\n    // Start polling\n    checkStatus();\n  });\n};\n\n/**\r\n * Download generated timetable in specified format with CORS handling\r\n * @param {string} uploadId - The upload ID from the generation process\r\n * @param {string} format - Download format ('excel', 'pdf')\r\n * @returns {Promise<void>}\r\n */\nexport const downloadTimetable = async (uploadId, format) => {\n  try {\n    console.log(`Downloading timetable: ${uploadId} in ${format} format`);\n    const response = await makeRequestWithRetry(() => apiClient.post('/export-timetable', {\n      upload_id: uploadId,\n      format: format.toLowerCase()\n    }, {\n      responseType: 'blob' // Important for file downloads\n    }));\n\n    // Create blob link to download\n    const url = window.URL.createObjectURL(new Blob([response.data]));\n    const link = document.createElement('a');\n    link.href = url;\n\n    // Set filename based on format\n    const timestamp = new Date().toISOString().slice(0, 10);\n    const filename = `timetable_${timestamp}.${format === 'pdf' ? 'pdf' : 'xlsx'}`;\n    link.setAttribute('download', filename);\n\n    // Trigger download\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n    window.URL.revokeObjectURL(url);\n  } catch (error) {\n    console.error('Download error:', error);\n    throw new Error(`Download failed: ${error.message}`);\n  }\n};\n\n/**\r\n * Get available time slots from server\r\n * @returns {Promise<Array>} Available time slots\r\n */\nexport const getTimeSlots = async () => {\n  try {\n    // Try to get time slots from API first\n    const response = await makeRequestWithRetry(() => apiClient.get('/timetable/timeslots'));\n    return response.data;\n  } catch (error) {\n    // If API endpoint doesn't exist or fails, return default time slots\n    console.warn('Failed to fetch time slots from API, using defaults:', error.message);\n    return [{\n      start: '09:00',\n      end: '10:00',\n      label: '9:00 AM'\n    }, {\n      start: '10:00',\n      end: '11:00',\n      label: '10:00 AM'\n    }, {\n      start: '11:00',\n      end: '12:00',\n      label: '11:00 AM'\n    }, {\n      start: '12:00',\n      end: '13:00',\n      label: '12:00 PM'\n    }, {\n      start: '14:00',\n      end: '15:00',\n      label: '2:00 PM'\n    }, {\n      start: '15:00',\n      end: '16:00',\n      label: '3:00 PM'\n    }, {\n      start: '16:00',\n      end: '17:00',\n      label: '4:00 PM'\n    }];\n  }\n};\n\n/**\r\n * Validate uploaded file on server\r\n * @param {string} fileId - ID of uploaded file\r\n * @returns {Promise<Object>} Validation results\r\n */\nexport const validateFile = async fileId => {\n  try {\n    const response = await makeRequestWithRetry(() => apiClient.post('/timetable/validate', {\n      fileId\n    }));\n    return response.data;\n  } catch (error) {\n    throw new Error(`File validation failed: ${error.message}`);\n  }\n};\n\n/**\r\n * Utilities to work with the backend Dash UI mounted under /interactive\r\n */\nexport const getBackendBaseUrl = () => API_BASE_URL;\nexport const getDashUrl = uploadId => {\n  // The Dash app reads the latest generated data saved by the backend.\n  // Attach the job id as a query param for visibility (Dash ignores it, harmless).\n  const base = `${API_BASE_URL}/interactive/`;\n  return uploadId ? `${base}?job=${encodeURIComponent(uploadId)}` : base;\n};\nexport const openDashUI = uploadId => {\n  const url = getDashUrl(uploadId);\n  try {\n    window.open(url, '_blank', 'noopener,noreferrer');\n  } catch (_) {\n    // Fallback\n    window.location.href = url;\n  }\n};\nexport default apiClient;","map":{"version":3,"names":["axios","getApiBaseUrl","process","env","NODE_ENV","REACT_APP_API_BASE_URL","API_BASE_URL","apiClient","create","baseURL","timeout","withCredentials","headers","interceptors","request","use","config","method","toUpperCase","url","console","log","data","FormData","error","Promise","reject","response","code","message","includes","Error","status","makeRequestWithRetry","requestFn","retries","i","msg","toLowerCase","resolve","setTimeout","uploadFile","file","formData","append","name","uploadEndpoint","REACT_APP_UPLOAD_ENDPOINT","post","uploadId","upload_id","id","meta","err","_err$response","_err$response$data","generateTimetable","progressCallback","options","body","population_size","Number","REACT_APP_DE_POP_SIZE","max_generations","REACT_APP_DE_MAX_GENS","F","REACT_APP_DE_F","CR","REACT_APP_DE_CR","startResponse","pollForCompletion","_error$response","_error$response$data","maxAttempts","attempts","checkStatus","statusResponse","get","statusData","normalized","State","state","progress","result","percentage","timetables","timetables_raw","parsed_timetables","map","timetable","index","parsed","rows","downloadTimetable","format","responseType","window","URL","createObjectURL","Blob","link","document","createElement","href","timestamp","Date","toISOString","slice","filename","setAttribute","appendChild","click","remove","revokeObjectURL","getTimeSlots","warn","start","end","label","validateFile","fileId","getBackendBaseUrl","getDashUrl","base","encodeURIComponent","openDashUI","open","_","location"],"sources":["C:/Users/Jamil/Downloads/Timetable-Scheduler-Fullstack/Frontend/PAU-Timetable_Scheduler/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Determine API base URL based on environment\r\nconst getApiBaseUrl = () => {\r\n  // For development, use relative URLs with /api prefix to work with proxy\r\n  if (process.env.NODE_ENV === 'development') {\r\n    return '/api';\r\n  }\r\n  // Always prefer explicit env override if provided\r\n  if (process.env.REACT_APP_API_BASE_URL) return process.env.REACT_APP_API_BASE_URL;\r\n  // Default to local Flask backend\r\n  return 'http://localhost:7860/api';\r\n};\r\n\r\nconst API_BASE_URL = getApiBaseUrl();\r\n\r\n// Create axios instance with CORS-friendly config\r\nconst apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 300000, // 5 minutes timeout for large file processing\r\n  withCredentials: false, // Important for CORS\r\n  headers: {\r\n    'Accept': 'application/json',\r\n    // Content-Type set conditionally in interceptor\r\n  },\r\n});\r\n\r\n// Add request interceptor for logging and proper headers\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const method = (config.method || 'GET').toUpperCase();\r\n    const url = config.baseURL ? `${config.baseURL}${config.url}` : config.url;\r\n    console.log(`Making ${method} request to ${url}`);\r\n\r\n    // Set appropriate headers for different request types\r\n    if (config.data instanceof FormData) {\r\n      // For file uploads, let browser set Content-Type with boundary\r\n      if (config.headers) {\r\n        delete config.headers['Content-Type'];\r\n      }\r\n    } else if (typeof config.data === 'object' && config.data !== null) {\r\n      // For JSON data\r\n      if (config.headers) {\r\n        config.headers['Content-Type'] = 'application/json';\r\n      }\r\n    }\r\n\r\n    // Do NOT set Access-Control-Allow-* on requests (these are response headers)\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('Request error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add response interceptor for error handling\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    console.error('API Error:', error);\r\n\r\n    // Distinguish unreachable backend vs actual CORS rejection\r\n    if (error.request && !error.response) {\r\n      // Network error / connection refused\r\n      if (error.code === 'ERR_NETWORK' || (error.message && error.message.includes('Network Error'))) {\r\n        throw new Error('Cannot reach backend server. Ensure it is running and the API base URL is correct.');\r\n      }\r\n    }\r\n\r\n    if (error.response) {\r\n      const { status, data } = error.response;\r\n\r\n      // Some browsers report CORS failures with opaque responses (status 0)\r\n      if (status === 0) {\r\n        throw new Error('CORS error: Backend did not allow this origin.');\r\n      }\r\n\r\n      const message = data?.message || data?.error || `Server error (${status})`;\r\n      throw new Error(message);\r\n    }\r\n\r\n    // Fallback\r\n    throw new Error(error.message || 'An unexpected error occurred');\r\n  }\r\n);\r\n\r\n/**\r\n * Make a CORS-safe request with retry logic\r\n * @param {Function} requestFn - The axios request function\r\n * @param {number} retries - Number of retries\r\n */\r\nconst makeRequestWithRetry = async (requestFn, retries = 3) => {\r\n  for (let i = 0; i < retries; i++) {\r\n    try {\r\n      return await requestFn();\r\n    } catch (error) {\r\n      if (i === retries - 1) throw error;\r\n\r\n      const msg = error?.message || '';\r\n      // If temporary network/CORS-like error, wait and retry\r\n      if (msg.toLowerCase().includes('cors') || msg.toLowerCase().includes('backend') || msg.toLowerCase().includes('network')) {\r\n        console.log(`Temporary connectivity error, retrying... (${i + 1}/${retries})`);\r\n        await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));\r\n      } else {\r\n        throw error;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Upload file to the server with CORS handling\r\n * @param {File} file - The Excel file to upload\r\n * @returns {Promise<Object>} Response containing file ID and metadata\r\n */\r\nexport const uploadFile = async (file) => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  formData.append('filename', file.name);\r\n\r\n  const uploadEndpoint = process.env.REACT_APP_UPLOAD_ENDPOINT || '/upload-excel';\r\n\r\n  try {\r\n    const response = await makeRequestWithRetry(() =>\r\n      apiClient.post(uploadEndpoint, formData)\r\n    );\r\n\r\n    const data = response.data;\r\n    const uploadId = data.upload_id || data.uploadId || data.id; // defensive read\r\n    if (!uploadId) throw new Error('upload_id not returned by server');\r\n\r\n    console.log('Upload successful:', data);\r\n    return { uploadId, meta: data };\r\n  } catch (err) {\r\n    console.error('Upload error details:', err);\r\n    const message = err?.response?.data?.error || err.message || 'Upload failed';\r\n    throw new Error(`File upload failed: ${message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Generate timetable from uploaded file\r\n * @param {string} uploadId - ID of the uploaded file\r\n * @param {Function} progressCallback - Callback for progress updates\r\n * @param {Object} options - Optional parameters to override defaults (e.g., max_generations)\r\n * @returns {Promise<Object>} Generated timetable data\r\n */\r\nexport const generateTimetable = async (uploadId, progressCallback, options) => {\r\n  try {\r\n    // Start the generation process\r\n    const body = {\r\n      upload_id: uploadId,\r\n      config: {\r\n        population_size: Number(process.env.REACT_APP_DE_POP_SIZE) || 25,\r\n        max_generations: Number(process.env.REACT_APP_DE_MAX_GENS) || 10,\r\n        F: Number(process.env.REACT_APP_DE_F) || 0.4,\r\n        CR: Number(process.env.REACT_APP_DE_CR) || 0.9\r\n      }\r\n    };\r\n\r\n    // Allow overrides from caller (e.g., user-provided generations)\r\n    if (options && typeof options === 'object') {\r\n      body.config = { ...body.config, ...options };\r\n    }\r\n\r\n    console.log('Starting timetable generation with:', body);\r\n    const startResponse = await makeRequestWithRetry(() =>\r\n      apiClient.post('/generate-timetable', body)\r\n    );\r\n\r\n    if (startResponse.status !== 202) {\r\n      throw new Error('Failed to start timetable generation');\r\n    }\r\n\r\n    console.log('Generation started, polling for status...');\r\n    // Poll for status updates\r\n    return await pollForCompletion(uploadId, progressCallback);\r\n\r\n  } catch (error) {\r\n    console.error('Generation error:', error);\r\n    const msg = error?.response?.data?.error || error?.message || 'Unknown error';\r\n    throw new Error(`Timetable generation failed: ${msg}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Poll the server for generation completion status with CORS handling\r\n * @param {string} uploadId - Upload ID to check status for\r\n * @param {Function} progressCallback - Progress update callback\r\n * @returns {Promise<Object>} Final timetable data\r\n */\r\nconst pollForCompletion = async (uploadId, progressCallback) => {\r\n  const maxAttempts = 120; // 10 minutes with 5-second intervals\r\n  let attempts = 0;\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const checkStatus = async () => {\r\n      try {\r\n        attempts++;\r\n        const statusResponse = await makeRequestWithRetry(() =>\r\n          apiClient.get(`/get-timetable-status/${uploadId}`)\r\n        );\r\n        const statusData = statusResponse && statusResponse.data ? statusResponse.data : {};\r\n\r\n        // Normalize status and derive sensible defaults\r\n        const normalized = {\r\n          status: statusData.status || statusData.State || statusData.state,\r\n          progress: typeof statusData.progress === 'number' ? statusData.progress : 0,\r\n          message: statusData.message || '',\r\n          result: statusData.result,\r\n          error: statusData.error || statusData.Error\r\n        };\r\n\r\n        // If backend returned a completed result but no explicit status\r\n        if (!normalized.status && normalized.result) {\r\n          normalized.status = 'completed';\r\n        }\r\n        // If backend indicates error but no explicit status\r\n        if (!normalized.status && normalized.error) {\r\n          normalized.status = 'error';\r\n        }\r\n        // Default to processing if still undefined but HTTP 200\r\n        if (!normalized.status) {\r\n          normalized.status = 'processing';\r\n        }\r\n\r\n        // Update progress UI\r\n        if (progressCallback) {\r\n          progressCallback({\r\n            percentage: normalized.progress,\r\n            message: normalized.message || 'Processing...'\r\n          });\r\n        }\r\n\r\n        if (normalized.status === 'completed') {\r\n          const result = normalized.result;\r\n          if (result) {\r\n            if (!result.timetables && result.timetables_raw) {\r\n              result.timetables = result.timetables_raw;\r\n            }\r\n            if (result.parsed_timetables && result.timetables) {\r\n              result.timetables = result.timetables.map((timetable, index) => {\r\n                const parsed = result.parsed_timetables[index];\r\n                return { ...timetable, rows: parsed ? parsed.rows : [] };\r\n              });\r\n            }\r\n          }\r\n          // ensure UI reflects completion\r\n          if (progressCallback) {\r\n            progressCallback({ percentage: 100, message: 'Completed' });\r\n          }\r\n          resolve(result);\r\n          return;\r\n        }\r\n\r\n        if (normalized.status === 'error') {\r\n          reject(new Error(normalized.error || 'Generation failed'));\r\n          return;\r\n        }\r\n\r\n        // Still processing, continue polling\r\n        if (attempts >= maxAttempts) {\r\n          reject(new Error('Generation timeout - please try again'));\r\n          return;\r\n        }\r\n        setTimeout(checkStatus, 5000);\r\n        return;\r\n      } catch (error) {\r\n        console.error('Status check error:', error);\r\n        if (error.message.includes('CORS')) {\r\n          reject(new Error('CORS policy is blocking requests to the backend. Please check the server configuration.'));\r\n        } else {\r\n          reject(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Start polling\r\n    checkStatus();\r\n  });\r\n};\r\n\r\n/**\r\n * Download generated timetable in specified format with CORS handling\r\n * @param {string} uploadId - The upload ID from the generation process\r\n * @param {string} format - Download format ('excel', 'pdf')\r\n * @returns {Promise<void>}\r\n */\r\nexport const downloadTimetable = async (uploadId, format) => {\r\n  try {\r\n    console.log(`Downloading timetable: ${uploadId} in ${format} format`);\r\n    const response = await makeRequestWithRetry(() =>\r\n      apiClient.post(\r\n        '/export-timetable',\r\n        {\r\n          upload_id: uploadId,\r\n          format: format.toLowerCase()\r\n        },\r\n        {\r\n          responseType: 'blob', // Important for file downloads\r\n        }\r\n      )\r\n    );\r\n\r\n    // Create blob link to download\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    \r\n    // Set filename based on format\r\n    const timestamp = new Date().toISOString().slice(0, 10);\r\n    const filename = `timetable_${timestamp}.${format === 'pdf' ? 'pdf' : 'xlsx'}`;\r\n    link.setAttribute('download', filename);\r\n    \r\n    // Trigger download\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    link.remove();\r\n    window.URL.revokeObjectURL(url);\r\n    \r\n  } catch (error) {\r\n    console.error('Download error:', error);\r\n    throw new Error(`Download failed: ${error.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Get available time slots from server\r\n * @returns {Promise<Array>} Available time slots\r\n */\r\nexport const getTimeSlots = async () => {\r\n  try {\r\n    // Try to get time slots from API first\r\n    const response = await makeRequestWithRetry(() =>\r\n      apiClient.get('/timetable/timeslots')\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    // If API endpoint doesn't exist or fails, return default time slots\r\n    console.warn('Failed to fetch time slots from API, using defaults:', error.message);\r\n    return [\r\n      { start: '09:00', end: '10:00', label: '9:00 AM' },\r\n      { start: '10:00', end: '11:00', label: '10:00 AM' },\r\n      { start: '11:00', end: '12:00', label: '11:00 AM' },\r\n      { start: '12:00', end: '13:00', label: '12:00 PM' },\r\n      { start: '14:00', end: '15:00', label: '2:00 PM' },\r\n      { start: '15:00', end: '16:00', label: '3:00 PM' },\r\n      { start: '16:00', end: '17:00', label: '4:00 PM' },\r\n    ];\r\n  }\r\n};\r\n\r\n/**\r\n * Validate uploaded file on server\r\n * @param {string} fileId - ID of uploaded file\r\n * @returns {Promise<Object>} Validation results\r\n */\r\nexport const validateFile = async (fileId) => {\r\n  try {\r\n    const response = await makeRequestWithRetry(() =>\r\n      apiClient.post('/timetable/validate', { fileId })\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    throw new Error(`File validation failed: ${error.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Utilities to work with the backend Dash UI mounted under /interactive\r\n */\r\nexport const getBackendBaseUrl = () => API_BASE_URL;\r\n\r\nexport const getDashUrl = (uploadId) => {\r\n  // The Dash app reads the latest generated data saved by the backend.\r\n  // Attach the job id as a query param for visibility (Dash ignores it, harmless).\r\n  const base = `${API_BASE_URL}/interactive/`;\r\n  return uploadId ? `${base}?job=${encodeURIComponent(uploadId)}` : base;\r\n};\r\n\r\nexport const openDashUI = (uploadId) => {\r\n  const url = getDashUrl(uploadId);\r\n  try {\r\n    window.open(url, '_blank', 'noopener,noreferrer');\r\n  } catch (_) {\r\n    // Fallback\r\n    window.location.href = url;\r\n  }\r\n};\r\n\r\nexport default apiClient;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}